# VSCode PureBasic 插件测试指南

## 测试环境设置

### 1. 开发模式测试
1. 在VSCode中打开 `vscode-purebasic` 文件夹
2. 按 `F5` 启动调试模式
3. 这会打开一个新的VSCode窗口（扩展开发主机）

### 2. 扩展安装测试
1. 安装生成的扩展包：`code --install-extension vscode-purebasic-0.0.1.vsix`
2. 重启VSCode

## 测试文件说明

### test_basic.pb - 基础语法测试
- **语法高亮**: 测试关键字、字符串、注释、数字的高亮
- **代码折叠**: 测试Procedure/EndProcedure、If/EndIf等结构的折叠
- **自动补全**: 测试关键字、函数、数据类型的补全
- **错误诊断**: 测试语法错误检测（故意写的错误代码）

### test_gui.pb - GUI功能测试
- **函数补全**: 测试GUI相关函数的自动补全
- **悬停提示**: 测试GUI函数的参数提示
- **常量识别**: 测试#PB_*常量的识别和高亮

### test_algorithms.pb - 复杂结构测试
- **结构体**: 测试Structure/EndStructure的语法高亮
- **指针操作**: 测试指针相关的语法高亮
- **复杂算法**: 测试复杂函数和算法的语法分析

## 功能测试清单

### ✅ 基础语言支持
- [ ] 语法高亮正常显示
- [ ] 代码折叠功能正常
- [ ] 括号自动匹配
- [ ] 行注释支持(;)

### ✅ LSP智能功能
- [ ] 自动补全（Ctrl+Space）
- [ ] 转到定义（F12）
- [ ] 查找所有引用（Shift+F12）
- [ ] 悬停提示
- [ ] 语法错误诊断
- [ ] 重命名符号（F2）
- [ ] 代码格式化（Shift+Alt+F）

### ✅ 文件关联
- [ ] .pb文件自动识别为PureBasic
- [ ] .pbi文件自动识别为PureBasic
- [ ] 语法高亮自动应用

## 测试步骤

### 1. 语法高亮测试
1. 打开 `test/samples/test_basic.pb`
2. 检查关键字（If, For, Procedure等）是否正确高亮
3. 检查字符串、注释、数字是否正确高亮
4. 检查数据类型（Integer, String等）是否正确高亮

### 2. 代码折叠测试
1. 在 `test_basic.pb` 中查找 Procedure/EndProcedure 块
2. 点击代码左侧的折叠图标
3. 验证代码块是否正确折叠和展开

### 3. 自动补全测试
1. 在新行中输入 "If"
2. 按 Ctrl+Space 触发自动补全
3. 验证是否显示 If、Then、Else 等选项
4. 测试函数名补全（输入 "OpenW"）
5. 测试数据类型补全（输入 "Int"）

### 4. 转到定义测试
1. 在 `test_basic.pb` 中找到函数调用处
2. 将光标放在函数名上
3. 按F12测试是否跳转到函数定义

### 5. 悬停提示测试
1. 将鼠标悬停在函数名上
2. 验证是否显示函数信息提示
3. 将鼠标悬停在变量上
4. 验证是否显示变量类型信息

### 6. 错误诊断测试
1. 在 `test_basic.pb` 文件底部找到故意写的错误代码
2. 验证是否显示红色波浪线和错误提示
3. 修复错误，验证错误提示是否消失

### 7. 重命名测试
1. 选择一个变量名
2. 按F2重命名
3. 输入新名称并按Enter
4. 验证所有引用是否正确更新

### 8. 代码格式化测试
1. 选择一段格式混乱的代码
2. 按 Shift+Alt+F
3. 验证代码是否正确格式化

## 预期结果

### 语法高亮
- 关键字：蓝色/紫色
- 字符串：橙色
- 注释：灰色
- 数字：绿色
- 函数：浅蓝色
- 数据类型：青色

### 自动补全
- 关键字：显示完整的PureBasic关键字列表
- 函数：显示内置函数列表
- 数据类型：显示数据类型列表

### 错误诊断
- 语法错误：红色波浪线
- 警告：黄色波浪线
- 错误信息：显示在问题面板中

## 故障排除

### 扩展未激活
1. 检查VSCode版本是否支持（>=1.60.0）
2. 检查扩展是否正确安装
3. 重启VSCode

### LSP功能不工作
1. 检查TypeScript是否正确编译
2. 检查语言服务器是否正确启动
3. 查看输出面板中的错误信息

### 语法高亮不工作
1. 检查文件关联是否正确
2. 检查语法定义文件是否存在
3. 重新加载VSCode窗口

## 测试完成

所有功能测试通过后，插件可以正常使用。如果发现问题，请检查：
1. 控制台输出中的错误信息
2. TypeScript编译是否成功
3. 语言服务器是否正常启动